<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrativo - Hospital San Juan</title>
    <link rel="stylesheet" href="/css/admin.css">
</head>
<body>
    <!-- ğŸ” LOGIN ADMIN -->
    <div id="loginAdmin" class="admin-login-container">
        <div class="admin-login-form">
            <div class="hospital-header">
                <h1>ğŸ¥ Hospital San Juan</h1>
                <p>Panel Administrativo</p>
            </div>
            
            <form id="adminLoginForm" class="login-form">
                <h2>ğŸ” Acceso Administrativo</h2>
                
                <div class="form-group">
                    <label for="adminUsername">Usuario:</label>
                    <input type="text" id="adminUsername" required 
                           placeholder="Ingrese su usuario administrativo">
                </div>
                
                <div class="form-group">
                    <label for="adminPassword">ContraseÃ±a:</label>
                    <input type="password" id="adminPassword" required 
                           placeholder="Ingrese su contraseÃ±a">
                </div>
                
                <button type="submit" class="btn btn-primary btn-large">
                    ğŸš€ Ingresar al Panel
                </button>
                
                <div class="login-info">
                    <p><strong>Credenciales de prueba:</strong></p>
                    <p>Usuario: <code>admin</code> | ContraseÃ±a: <code>admin123</code></p>
                </div>
            </form>
        </div>
    </div>

    <!-- ğŸ“Š DASHBOARD ADMIN (oculto inicialmente) -->
    <div id="adminDashboard" class="admin-dashboard" style="display: none;">
        <!-- ğŸ¯ HEADER -->
        <header class="admin-header">
            <div class="header-left">
                <h1>ğŸ¥ Panel Administrativo</h1>
                <span id="adminWelcome">Bienvenido, Administrador</span>
            </div>
            <div class="header-right">
                <span id="currentDateTime"></span>
                <button onclick="adminLogout()" class="btn btn-secondary">
                    ğŸšª Cerrar SesiÃ³n
                </button>
            </div>
        </header>

        <!-- ğŸ“ˆ STATS CARDS -->
        <section class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">ğŸ‘¥</div>
                    <div class="stat-info">
                        <h3 id="totalPatients">0</h3>
                        <p>Pacientes Registrados</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">ğŸ©º</div>
                    <div class="stat-info">
                        <h3 id="totalDoctors">0</h3>
                        <p>Doctores Activos</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“…</div>
                    <div class="stat-info">
                        <h3 id="totalAppointments">0</h3>
                        <p>Citas Totales</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“Š</div>
                    <div class="stat-info">
                        <h3 id="todayAppointments">0</h3>
                        <p>Citas Hoy</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ğŸ›ï¸ PANEL DE CONTROL -->
        <section class="control-panel">
            <div class="panel-tabs">
                <button class="tab-btn active" onclick="showTab('patients')">ğŸ‘¥ Pacientes</button>
                <button class="tab-btn" onclick="showTab('doctors')">ğŸ©º Doctores</button>
                <button class="tab-btn" onclick="showTab('appointments')">ğŸ“… Citas</button>
                <button class="tab-btn" onclick="showTab('reports')">ğŸ“ˆ Reportes</button>
            </div>

            <!-- ğŸ‘¥ TABLA DE PACIENTES -->
            <div id="patientsTab" class="tab-content active">
                <div class="tab-header">
                    <h2>ğŸ‘¥ GestiÃ³n de Pacientes</h2>
                    <div class="search-box">
                        <input type="text" id="searchPatients" placeholder="ğŸ” Buscar pacientes...">
                        <button onclick="searchPatients()" class="btn btn-primary">Buscar</button>
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Email</th>
                                <th>TelÃ©fono</th>
                                <th>Total Citas</th>
                                <th>Fecha Registro</th>
                            </tr>
                        </thead>
                        <tbody id="patientsTableBody">
                            <!-- Datos cargados por JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div class="pagination" id="patientsPagination">
                    <!-- PaginaciÃ³n -->
                </div>
            </div>

            <!-- ğŸ©º TABLA DE DOCTORES -->
            <div id="doctorsTab" class="tab-content">
                <div class="tab-header">
                    <h2>ğŸ©º GestiÃ³n de Doctores</h2>
                    <div class="filters">
                        <select id="specialtyFilter" onchange="loadDoctors()">
                            <option value="">Todas las especialidades</option>
                        </select>
                        <input type="text" id="searchDoctors" placeholder="ğŸ” Buscar doctores...">
                        <button onclick="loadDoctors()" class="btn btn-primary">Filtrar</button>
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Especialidad</th>
                                <th>Email</th>
                                <th>Total Citas</th>
                            </tr>
                        </thead>
                        <tbody id="doctorsTableBody">
                            <!-- Datos cargados por JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div class="pagination" id="doctorsPagination">
                    <!-- PaginaciÃ³n -->
                </div>
            </div>

            <!-- ğŸ“… TABLA DE CITAS -->
            <div id="appointmentsTab" class="tab-content">
                <div class="tab-header">
                    <h2>ğŸ“… GestiÃ³n de Citas</h2>
                    <div class="action-buttons">
                        <button class="btn btn-success" onclick="showCreateAppointmentModal()">
                            â• Nueva Cita
                        </button>
                        <button class="btn btn-warning" onclick="editSelectedAppointment()">
                            âœï¸ Editar Cita
                        </button>
                        <button class="btn btn-danger" onclick="deleteSelectedAppointment()">
                            ğŸ—‘ï¸ Cancelar Cita
                        </button>
                    </div>
                    <!-- En la secciÃ³n de filtros de citas -->
<div class="filters">
   <select id="statusFilter" onchange="loadAppointments(1)">
    <option value="">Todas las citas (incluyendo canceladas)</option>
    <option value="pendiente">Solo Pendientes</option>
    <option value="confirmada">Solo Confirmadas</option>
    <option value="completada">Solo Completadas</option>
    <option value="cancelada">Solo Canceladas</option>
</select>
    <input type="date" id="dateFilter" onchange="loadAppointments(1)">
    <button onclick="loadAppointments(1)" class="btn btn-primary">ğŸ” Filtrar</button>
    <button onclick="clearAppointmentFilters()" class="btn btn-secondary">ğŸ§¹ Limpiar</button>
</div>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th width="50px">
                                    <input type="checkbox" id="selectAllAppointments" onchange="toggleAllAppointments()">
                                </th>
                                <th>ID</th>
                                <th>Paciente</th>
                                <th>Doctor</th>
                                <th>Fecha</th>
                                <th>Estado</th>
                                <th>Motivo</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="appointmentsTableBody">
                            <!-- Datos cargados por JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div class="pagination" id="appointmentsPagination">
                    <!-- PaginaciÃ³n -->
                </div>
            </div>

            <!-- ğŸ“ˆ REPORTES AVANZADOS -->
            <div id="reportsTab" class="tab-content">
                <div class="tab-header">
                    <h2>ğŸ“ˆ Reportes Avanzados</h2>
                    <div class="report-controls">
                        <select id="reportType">
                            <option value="appointments_by_specialty">Citas por Especialidad</option>
                            <option value="patient_activity">Actividad de Pacientes</option>
                            <option value="doctor_performance">Rendimiento de Doctores</option>
                        </select>
                        <input type="date" id="startDate">
                        <input type="date" id="endDate">
                        <button onclick="generateReport()" class="btn btn-primary">ğŸ“Š Generar Reporte</button>
                    </div>
                </div>
                <div class="report-results" id="reportResults">
                    <!-- Resultados del reporte -->
                </div>
            </div>
        </section>

        <!-- ğŸ”” NOTIFICACIONES -->
        <div id="adminNotifications" class="notifications"></div>
    </div>

    <!-- ğŸ¯ MODAL PARA CREAR/EDITAR CITAS -->
    <div id="appointmentModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="appointmentModalTitle">â• Nueva Cita</h3>
                <span class="close" onclick="closeAppointmentModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="appointmentForm">
                    <input type="hidden" id="appointmentId">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="appointmentPatient">Paciente *</label>
                            <select id="appointmentPatient" required>
                                <option value="">Seleccionar paciente...</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="appointmentDoctor">Doctor *</label>
                            <select id="appointmentDoctor" required>
                                <option value="">Seleccionar doctor...</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="appointmentDate">Fecha y Hora *</label>
                            <input type="datetime-local" id="appointmentDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="appointmentStatus">Estado</label>
                            <select id="appointmentStatus">
                                <option value="pendiente">Pendiente</option>
                                <option value="confirmada">Confirmada</option>
                                <option value="completada">Completada</option>
                                <option value="cancelada">Cancelada</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="appointmentReason">Motivo de la consulta</label>
                        <textarea id="appointmentReason" rows="3" placeholder="DescripciÃ³n del motivo de la cita..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeAppointmentModal()">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="saveAppointment()">ğŸ’¾ Guardar Cita</button>
            </div>
        </div>
    </div>

    <script src="/js/admin.js"></script>
</body>
</html>